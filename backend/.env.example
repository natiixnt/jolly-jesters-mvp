# Backend environment (sample, no secrets)

# workspace
WORKSPACE=/workspace

# PostgreSQL / Redis
DB_URL=postgresql+psycopg2://mvp:mvp@postgres:5432/mvpdb
REDIS_URL=redis://redis:6379/0

# Celery
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}

# App defaults
DEFAULT_CURRENCY=PLN

# Local scraper (internal provider)
LOCAL_SCRAPER_ENABLED=true
LOCAL_SCRAPER_URL=http://local_scraper:5050
LOCAL_SCRAPER_WINDOWS=1
LOCAL_SCRAPER_MIN_INTERVAL_SECONDS=2
LOCAL_SCRAPER_COOLDOWN_SECONDS=120
LOCAL_SCRAPER_CAPTCHA_THRESHOLD=3
LOCAL_SCRAPER_CAPTCHA_COOLDOWN_SECONDS=300

# Cloud HTTP (legacy internal)
CLOUD_SCRAPER_MIN_INTERVAL_SECONDS=2
CLOUD_SCRAPER_COOLDOWN_SECONDS=120
CLOUD_SCRAPER_CAPTCHA_THRESHOLD=3
CLOUD_SCRAPER_CAPTCHA_COOLDOWN_SECONDS=300

# Scraper mode
# decodo | brightdata | legacy
SCRAPER_MODE=decodo

# Decodo Scraper API (request-based HTML)
DECODO_TOKEN=put_decodo_token_here
DECODO_GEO=
DECODO_LOCALE=pl-pl
DECODO_HEADLESS=html
DECODO_DEVICE_TYPE=desktop
DECODO_XHR=false
DECODO_SESSION_ID_MODE=per_ean   # per_ean | off
DECODO_TIMEOUT_SECONDS=150
DECODO_MAX_RETRIES=3
DECODO_MAX_CANDIDATES=8
DECODO_EAN_TIMEOUT_SECONDS=120
SAVE_DEBUG_HTML=false

# Bright Data Browser API (primary)
BRD_SBR_USERNAME=brd-customer-hl_d5ac7890-zone-scraping_browser2
BRD_SBR_PASSWORD=FAKE_BRD_SECRET_PASSWORD    # <-- podmień realnym sekretem poza repo
BRD_SBR_HOST=brd.superproxy.io
BRD_SBR_CDP_PORT=9222
BRD_SBR_WEBDRIVER_PORT=9515
SBR_POOL_SIZE=2
SBR_MAX_REQ_PER_SESSION=20
SBR_MAX_SESSION_MINUTES=15
SBR_COOLDOWN_MINUTES=60
SBR_TIE_BREAK_LIMIT=3
SCRAPER_CONCURRENCY=1
EAN_CACHE_TTL_DAYS=14

# Bright Data Residential proxies (request-based unlocker)
BRD_RESI_HOST=brd.superproxy.io
BRD_RESI_PORT=33335
BRD_RESI_USERNAME=brd-customer-hl_d5ac7890-zone-scraping_browser2
BRD_RESI_PASSWORD=FAKE_BRD_RESI_PASSWORD    # ustaw z dashboardu, nie commituj
# verify SSL with BRD cert (1) lub pomiń weryfikację (0, domyślnie)
BRD_RESI_VERIFY_SSL=0

# UI login (form + session cookie)
UI_PASSWORD=1234
UI_SESSION_TTL_HOURS=24

# Legacy scraper (Selenium lokalny)
# pozostaje w repo, włącz jeśli potrzebne
LOCAL_SCRAPER_ENABLED=true
LOCAL_SCRAPER_URL=http://local_scraper:5050
